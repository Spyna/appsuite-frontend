/**
 * This work is provided under the terms of the CREATIVE COMMONS PUBLIC
 * LICENSE. This work is protected by copyright and/or other applicable
 * law. Any use of the work other than as authorized under this license
 * or copyright law is prohibited.
 *
 * http://creativecommons.org/licenses/by-nc-sa/2.5/
 *
 * Â© 2014 Open-Xchange Inc., Tarrytown, NY, USA. info@open-xchange.com
 *
 * @author Edy Haryono <edy.haryono@open-xchange.com>
 */
define([
    'io.ox/core/viewer/backbone',
    'io.ox/core/viewer/views/mainview',
    'io.ox/core/viewer/main'
], function (backbone, MainView, Main) {

    describe('OX Viewer Main', function () {

        it('should have a launch method', function () {
            expect(Main.launch).to.be.a('function');
        });

        describe('launch()', function () {

            var dummyBaton = {
                allIds: [
                    {
                        id: '99/92',
                        modified_by: 20,
                        last_modified: 1418582202831,
                        folder_id: '99',
                        meta: {},
                        title: '1.jpg',
                        filename: '1.jpg',
                        file_mimetype: 'image/jpeg',
                        file_size: 31019,
                        version: '1',
                        locked_until: 0
                    },
                    {
                        id: '99/101',
                        modified_by: 20,
                        last_modified: 1418582207703,
                        folder_id: '99',
                        meta: {},
                        title: '10.jpg',
                        filename: '10.jpg',
                        file_mimetype: 'image/jpeg',
                        file_size: 18926,
                        version: '1',
                        locked_until: 0
                    },
                    {
                        id: '99/93',
                        modified_by: 20,
                        last_modified: 1418582203346,
                        folder_id: '99',
                        meta: {},
                        title: '2.jpg',
                        filename: '2.jpg',
                        file_mimetype: 'image/jpeg',
                        file_size: 93030,
                        version: '1',
                        locked_until: 0
                    }
                ],
                data: {
                    id: '99/93',
                    modified_by: 20,
                    last_modified: 1418582203346,
                    folder_id: '99',
                    meta: {},
                    title: '2.jpg',
                    filename: '2.jpg',
                    file_mimetype: 'image/jpeg',
                    file_size: 93030,
                    version: '1',
                    locked_until: 0
                }
            };

            Main.launch(dummyBaton);

            it('should create the file collection', function () {
                expect(Main.fileCollection).to.be.an.instanceof(backbone.Collection);
                expect(Main.fileCollection.length).to.be.equal(dummyBaton.allIds.length);
            });

            it('should create the main view', function () {
                expect(Main.mainView).to.be.an.instanceof(MainView);
            });

        });

    });

});
